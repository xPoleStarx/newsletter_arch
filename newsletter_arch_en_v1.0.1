flowchart LR
    %% --- Style Definitions ---
    classDef userInput fill:#d4edda,stroke:#155724,stroke-width:2px
    classDef agentProcess fill:#cce5ff,stroke:#004085,stroke-width:2px
    classDef generatedArtifact fill:#fff3cd,stroke:#856404,stroke-width:2px
    classDef finalProduct fill:#e2d4ed,stroke:#49127b,stroke-width:3px
    
    %% --- PHASE 1: Brand Foundations ---
    USER1([ðŸ‘¤ User<br/>Phase 1])
    
    IN1[ðŸ“¥ 01_brand_information]
    IN2[ðŸ“¥ 02_target_audience]
    IN3[ðŸ“¥ 03_business_goals]
    IN4[ðŸ“¥ 04_personality_notes]
    IN5[ðŸ“¥ 05_reference_texts]
    
    A1["ðŸ¤– Agent 1<br/>Newsletter:Strategy"]
    OUT1[ðŸ“„ strategy_document]
    
    A2["ðŸ¤– Agent 2<br/>Newsletter:Tonality"]
    OUT2[ðŸ“„ personality_guide]
    OUT3[ðŸ“„ writing_framework]
    
    %% --- PHASE 2: Newsletter Generation ---
    USER2([ðŸ‘¤ User<br/>Phase 2])
    
    IN6[ðŸ“¥ new_issue_topic]
    IN7[ðŸ“¥ new_issue_raw_info]
    IN8[ðŸ“¥ extras optional]
    
    A3["ðŸ¤– Agent 3<br/>Newsletter:Idea"]
    OUT4[ðŸ“„ issue_thesis]
    
    A4["ðŸ¤– Agent 4<br/>Newsletter:Content"]
    FINAL[[âœ… Final Newsletter]]
    
    %% --- PHASE 1 Flow ---
    USER1 --> IN1 & IN2 & IN3 & IN4 & IN5
    IN1 & IN2 & IN3 --> A1
    A1 --> OUT1
    OUT1 --> A2
    IN4 & IN5 --> A2
    A2 --> OUT2 & OUT3
    
    %% --- PHASE 2 Flow ---
    USER2 --> IN6 & IN7 & IN8
    IN6 & IN7 --> A3
    A3 --> OUT4
    OUT4 --> A4
    IN8 --> A4
    A4 --> FINAL
    
    %% --- Phase Connections (Phase 1 feeds Phase 2) ---
    OUT1 -.->|Strategy| A3
    OUT1 -.->|Strategy| A4
    OUT2 -.->|Personality| A4
    OUT3 -.->|Framework| A4
    IN5 -.->|Reference| A4
    
    %% --- Apply Styles ---
    class USER1,USER2 userInput
    class IN1,IN2,IN3,IN4,IN5,IN6,IN7,IN8 userInput
    class A1,A2,A3,A4 agentProcess
    class OUT1,OUT2,OUT3,OUT4 generatedArtifact
    class FINAL finalProduct
